(this.webpackJsonpddo_audit=this.webpackJsonpddo_audit||[]).push([[13],{157:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(13);t.a=function(e){return a.a.createElement(o.a,{className:"mini-group",to:"/grouping/"+e.server,style:{textDecoration:"none",color:"var(--text)"}},a.a.createElement("h5",{style:{fontWeight:"bold"}},e.server),a.a.createElement("span",{className:"lfm-number",style:{fontSize:"larger"}},e.questName),a.a.createElement("span",{style:{fontSize:"large"}},e.leaderName,", ",e.memberCount+1," member",e.memberCount+1>1?"s":""))}},158:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var r=n(57),a=n.n(r),o=n(66);function i(e,t){return s.apply(this,arguments)}function s(){return(s=Object(o.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(r=e.sent,"json"!==n){e.next=9;break}return e.next=6,r.json();case 6:r=e.sent,e.next=13;break;case 9:if("text"!==n){e.next=13;break}return e.next=12,r.text();case 12:r=e.sent;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Promise(function(){var e=Object(o.a)(a.a.mark((function e(o,s){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){r.isResolved||s()}),n),e.next=3,i(t,"json").then((function(e){o(e)})).catch((function(e){console.log("Failed to fetch group data")}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){if(null===e)return!1;if(9!==e.length)return!1;var t=!1;return e.forEach((function(e){void 0===e.Name&&(t=!0),void 0===e.LastUpdateTime&&(t=!0),void 0===e.Groups&&(t=!0),void 0===e.GroupCount&&(t=!0)})),!t}},453:function(e,t,n){"use strict";n.r(t);var r=n(17),a=n(61),o=n(52),i=n(0),s=n.n(i),u=n(82),l=n(77),c=n(69),m=n(78),p=n(157),f=n(13),d=function(e){return s.a.createElement(f.a,{to:"grouping/"+e.server.toLowerCase(),className:"server-select-option"},s.a.createElement("h3",{style:{fontWeight:"bold",marginBottom:"0px"}},e.server),s.a.createElement("span",{className:"lfm-number",style:{fontSize:"x-large",marginLeft:"auto"}},e.number),s.a.createElement("span",{style:{fontSize:"x-large",marginLeft:"5px"}},e.word,null===e.number||void 0===e.number||1===e.number?"":"s"))},g=n(158),h=["Argonnessen","Cannith","Ghallanda","Khyber","Orien","Sarlona","Thelanis","Wayfinder","Hardcore"],v=["Everyone is so shy today.","A travesty!","Well, you could always go solo..."];t.default=function(e){var t=s.a.useState(null),n=Object(o.a)(t,2),i=n[0],f=n[1],b=s.a.useState(null),E=Object(o.a)(b,2),y=E[0],w=E[1];s.a.useEffect((function(){function e(){Object(g.a)("https://www.playeraudit.com/api/groups",5e3).then((function(e){Object(g.b)(e)?(G([]),f(e)):(G([].concat(Object(a.a)(F),[{title:"Something went wrong",message:"Pretty descriptive, I know. Try refreshing the page. If the issue continues, please report it.",icon:"warning",fullscreen:!1,reportMessage:e||"Group data returned null"}])),f(null))})).catch((function(){G([].concat(Object(a.a)(F),[{title:"We're stuck on a loading screen",message:"This is taking longer than usual. You can refresh the page or report the issue.",icon:"warning",fullscreen:!1,reportMessage:"Could not fetch Group data. Timeout"}]))}))}e();var t=setInterval((function(){e()}),6e4);return function(){return clearInterval(t)}}),[]),s.a.useEffect((function(){if(i){var e=0;i.forEach((function(t){e+=t.GroupCount})),w(e)}else w(0)}),[i]);var N=s.a.useState("none"),L=Object(o.a)(N,2),k=L[0],j=L[1],x=s.a.useState(null),O=Object(o.a)(x,2),S=O[0];O[1];var M=s.a.useState([]),C=Object(o.a)(M,2),F=C[0],G=C[1];return s.a.createElement("div",null,s.a.createElement(u.a,null,s.a.createElement("title",null,"DDO Live LFM Viewer"),s.a.createElement("meta",{name:"description",content:"Browse LFMs from any server with a live LFM panel! Check the LFM panel before you login, or setup notifications and never miss raid night again!"})),s.a.createElement(c.a,{page:"servers",showLink:!1,visibility:k,componentReference:S,hideReportForm:function(){j("none")}}),s.a.createElement(m.a,{messages:F,popMessage:function(){if(F.length){var e=Object(a.a)(F);e=e.slice(1),G(e)}}}),s.a.createElement(l.a,{pageName:"grouping",showLink:!1,title:"Live LFM Viewer",subtitle:i?s.a.createElement("div",null,s.a.createElement("div",{className:"grouping-subtitle"},"There are currently"," ",s.a.createElement("span",{className:"lfm-number"},y)," ","groups posted."," ",y?"If you're not in one, you're missing out!":v[Math.floor(4*Math.random())]),s.a.createElement("div",{className:"grouping-subtitle-mobile",style:{fontSize:"larger"}},"Select a server")):s.a.createElement("div",null,"Loading group data...")},i?s.a.createElement("div",null,s.a.createElement("div",{className:"grouping-raid-group-container"},function(){if(null===i)return[];var e=[];return i.forEach((function(t){var n=t.Name;t.Groups.forEach((function(t){null!==t.Quest&&"Raid"===t.Quest.GroupSize&&e.push(Object(r.a)(Object(r.a)({},t),{},{ServerName:n}))}))})),e}().map((function(e,t){return s.a.createElement(p.a,{key:t,server:e.ServerName,questName:e.Quest.Name,leaderName:e.Leader.Name,memberCount:e.Members.length})}))),s.a.createElement("div",{className:"grouping-server-select-container"},i.map((function(e,t){return s.a.createElement(d,{key:t,server:e.Name,number:e.GroupCount,word:"group"})})))):s.a.createElement("div",{className:"grouping-server-select-container"},h.map((function(e,t){return s.a.createElement(d,{key:t,server:e})})))),s.a.createElement(l.a,{className:"grouping-extra-info",pageName:"grouping",showLink:!1,title:"",description:"",tiles:[{title:"Live LFM Viewer",content:s.a.createElement("div",null,s.a.createElement("p",{style:{fontSize:"larger"}},"Every LFM on every server, all in one place."),s.a.createElement("p",null,"The Live LFM Viewer updates every 15 seconds."),s.a.createElement("hr",null),s.a.createElement("h4",null,"API"),s.a.createElement("p",null,"Need the data for a project of your own? Visit the API page for more information!"),s.a.createElement("h4",null,"Contributions"),s.a.createElement("p",null,"A special thanks to the incredible people over at Vault of Kundarak for their invaluable contributions to the Live LFM Viewer project. This tool would not have been possible without their knowledge and data."))}]}))}}}]);
//# sourceMappingURL=13.bd81ea2c.chunk.js.map